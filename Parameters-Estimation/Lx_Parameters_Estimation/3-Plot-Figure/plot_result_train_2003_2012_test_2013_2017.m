addpath(genpath('..\0-Dataset\'));
addpath(genpath('..\1-Trained-Models\'));
addpath(genpath('..\..\..\Machine-Learning-Tools\3-Plot-Figure'));
load("..\0-Dataset\lx_training_dataset.mat");
load("..\0-Dataset\lx_test_dataset.mat");
load("..\1-Trained-Models\Trained-Tested-model-k-5.mat");

algorithm_names = {'EBM','RF', 'LSBoost'};
response = 'LxObs';

%% Training dataset
training_table_results = array2table([ ...
    lx_training_dataset.LxObs ...
    lx_training_dataset.LxObsOldModel ...
    result_trained_model.RF.validation_results.validation_predictions ...
    result_trained_model.LSBoost.validation_results.validation_predictions...
],"VariableNames",{'real_lx','ebm_pred', 'rf_pred', 'lsb_pred'});

create_perfect_fit(training_table_results,algorithm_names,true,30);
create_residuals_plot(training_table_results,algorithm_names,response);

%% Test dataset
test_table_results = array2table([ ...
    lx_test_dataset.LxObs ...
    lx_test_dataset.LxObsOldModel ...
    result_trained_model.RF.test_results.test_predictions...
    result_trained_model.LSBoost.test_results.test_predictions...
],"VariableNames",{'real_lx', 'ebm_pred', 'rf_pred', 'lsb_pred'});

create_perfect_fit(test_table_results,algorithm_names,true,30);
create_residuals_plot(test_table_results,algorithm_names,response);