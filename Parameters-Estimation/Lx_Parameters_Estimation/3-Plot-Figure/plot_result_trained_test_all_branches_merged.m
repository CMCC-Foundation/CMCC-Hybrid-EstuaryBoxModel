addpath(genpath('..\0-Dataset\Po-all-branches\all-branches-merged'));
addpath(genpath('..\..\..\Machine-Learning-Tools\3-Plot-Figure'));
load("..\0-Dataset\Po-all-branches\all-branches-merged\lx_training_dataset.mat");
load("..\0-Dataset\Po-all-branches\all-branches-merged\lx_test_dataset.mat");

algorithm_names = {'lx old equation', 'lx new equation','random forest', 'lsboost'};
response = 'LxObs';

%% Training dataset
training_table_results = array2table([lx_training_dataset.LxObs,...
    lx_training_dataset.LxOldEquationPred,...
    lx_training_dataset.LxNewEquationPred,...
    lx_training_dataset.RandomForest_Prediction,...
    lx_training_dataset.Lsboost_Prediction],...
    'VariableNames',{'real_lx','lx_old_equation', 'lx_new_equation', 'rf_pred', 'lsb_pred'});

create_perfect_fit_residuals_plot(training_table_results, algorithm_names, response, "Training dataset",true,30);

%% Test dataset
test_table_results = array2table([lx_test_dataset.LxObs,...
    lx_test_dataset.LxOldEquationPred,...
    lx_test_dataset.LxNewEquationPred,...
    lx_test_dataset.RandomForest_Prediction,...
    lx_test_dataset.Lsboost_Prediction],...
    'VariableNames',{'real_lx','lx_old_equation', 'lx_new_equation', 'rf_pred', 'lsb_pred'});

create_perfect_fit_residuals_plot(test_table_results, algorithm_names, response, "Test dataset",true,30);